# name: test/sql/tcc_module_modes.test
# description: mode coverage for tcc_module
# group: [capi_quack]

require capi_quack

query TTTT
SELECT ok, mode, code, detail
FROM tcc_module(mode := 'config_set', runtime_path := '/tmp/runtime-a');
----
true	config_set	OK	/tmp/runtime-a

query TTTT
SELECT ok, mode, code, detail
FROM tcc_module(mode := 'config_get');
----
true	config_get	OK	/tmp/runtime-a

query TTT
SELECT ok, mode, code
FROM tcc_module(mode := 'config_reset');
----
true	config_reset	OK

query TTTT
SELECT ok, mode, code, detail
FROM tcc_module(mode := 'config_get');
----
true	config_get	OK	(unset)

query TTT
SELECT ok, mode, code
FROM tcc_module(mode := 'list');
----
true	list	OK

query TTT
SELECT ok, mode, code
FROM tcc_module(mode := 'register');
----
false	register	E_NOT_IMPLEMENTED

query TTT
SELECT ok, mode, code
FROM tcc_module(mode := 'unregister');
----
false	unregister	E_NOT_IMPLEMENTED

query TTT
SELECT ok, mode, code
FROM tcc_module(mode := 'nonsense');
----
false	nonsense	E_BAD_MODE
